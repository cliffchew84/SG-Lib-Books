<div class="w-full overflow-x-auto">

    {% if status %}

    {% include 'update_status.html' %}

    {% endif %}

    <input class="md:text-base text-sm form-control w-full rounded-lg my-2 border-2 border-blue-800" id="myInput"
        type="text" placeholder="Search books by their title keywords!">

    <h3 class="bg-sky-700 text-white font-semibold py-2 text-lg">{{ library|title }}<h3>
            <table class="border-collapse w-full table-sm divide-y divide-black">
                <thead class='rounded-lg'>
                    <tr class='bg-sky-700 text-white rounded-lg'>
                        <th>{{ lib_avail }} / {{ lib_all }}</th>
                        <th>Number</th>
                        <th class="flex items-center justify-center gap-1">Status
                            <input class="checkbox checkbox-xs checkbox-info border-white border-2" type="checkbox"
                                id="availableCheckbox">
                        </th>
                        <th></th>
                    </tr>
                </thead>
                <tbody id="myTable">
                    {% for data in api_data %}

                    <tr class='text-sm rounded-lg'>
                        {% for a in data %}

                        {% if a == "UpdateTime" %}

                        <!-- Skip to do nothing -->

                        {% elif a != "BranchName" %}

                        {% if data[a]|int !=0 %}

                        <td class="px-1 hidden md:block">
                            <form action="/update_book/{{data[a]}}" method="POST">
                                <button type="submit" class="bg-sky-700 px-3 py-1 rounded-lg 
                            hover:text-white hover:bg-sky-500 text-white">
                                    {{ data['UpdateTime'] }}</button>
                            </form>
                        </td>

                        <td class="px-1 block md:hidden">
                            <form action="/update_book/{{data[a]}}" method="POST">
                                <button type="submit" class="bg-sky-700 px-3 py-1 rounded-lg 
                            hover:text-white hover:bg-sky-500 text-white">
                                    <i class="fas fa-sync"></i>
                                </button>
                            </form>
                        </td>

                        {% elif a == "TitleName" %}
                        {% set TitleName, BID = data[a].split(' | ') %}

                        <td>
                            <a href="https://eservice.nlb.gov.sg/item_holding.aspx?id={{BID}}&type=bid&app=mylibrary"
                                class="hidden md:block text-blue-800 font-semibold underline" target="_blank"
                                rel="noopener noreferrer">{{
                                TitleName }}</a>

                            <a href="https://eservice.nlb.gov.sg/item_holding.aspx?id={{BID}}&type=bid&app=mylibrary"
                                class="block md:hidden text-blue-800 font-semibold underline" target="_blank"
                                rel="noopener noreferrer">{{
                                TitleName.split(" : ")[0] }}</a>

                            {% elif a == "StatusDesc" %}

                            {% if data[a] == "Available" %}

                        <td class="px-3 py-1 text-xs">
                            <span
                                class="px-2 py-1 font-semibold leading-tight text-green-700 bg-green-100 rounded-lg text-center">
                                {{ data[a] }}
                            </span>
                        </td>

                        {% else %}

                        <td class="px-3 py-1 text-xs">
                            <span
                                class="px-2 py-1 font-semibold leading-tight text-red-700 bg-red-100 rounded-lg text-center">
                                {{ data[a] }}
                            </span>
                        </td>

                        {% endif %}

                        {% else %}

                        <td>{{ data[a] }}</td>

                        {% endif %}

                        {% endif %}

                        {% endfor %}

                    </tr>
                    {% endfor %}
                </tbody>
            </table>
</div>
