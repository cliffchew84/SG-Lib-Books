{% include 'header.html' %}
{% include 'navbar.html' %}

<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">

<div class="pt-4 mt-2 pb-3 px-10 sm:px-20 xl:px-40">
    <div class="text-gray-700">
        <p class="text-xl">A library-centric view of your favourite Singapore library books!</p>
        <div class='md:flex text-base py-3 space-x-1'>
            <div>
                <p>
                    Using the <a class="font-semibold underline" target="_blank"
                        href="https://www.nlb.gov.sg/main/partner-us/contribute-and-create-with-us/NLBLabs">official NLB
                        APIs</a> <span class="font-bold">(14-08-2023)</span>, this site aims to provide an easier,
                    single view of all your saved Singapore library books. Best viewed on desktop. For feedback, email
                    me at <span class="font-semibold underline">sglibreads@gmail.com</span>. Read about my story
                    <a class="font-semibold underline" target="_blank"
                        href="https://medium.com/@cliffy-gardens/my-singapore-library-app-is-live-b63fc9f5ae9a">here</a>,
                    or connect professionally at <a class="fa fa-linkedin-square" target="_blank" style="font-size:24px"
                        href="https://www.linkedin.com/in/cliff-chew-kt/"></a>
                </p>
            </div>
        </div>
    </div>
    <div class="flex flex-col md:flex-row items-center justify-center md:space-x-16">
        <div class="w-full md:w-5/6 lg:w-1/2 md:pb-2 md:pt-2 py-4 px-6 border-4 rounded-lg">
            <form action="/login" method="POST">
                <div class="mb-3 items-center justify-center">
                    <label for="username" class="mx-3 form-label">Username</label>
                    <input type="text" class="flex mt-2 py-2 mx-3 w-11/12 md:text-base text-sm form-control 
                        rounded-lg border-2 border-blue-800" id='username' name='username' required>
                </div>
                <label for="password" class="mx-3 form-label">Password</label>

                <div class="relative w-full" <!-- Password show and hide button -->
                    <div class="absolute inset-y-0 right-0 flex items-center px-4 xs:px-4 sm:px-4 xl:px-8">
                        <input class="hidden js-password-toggle" id="login-toggle" type="checkbox" />
                        <label class="bg-white rounded-lg px-2 mx-1
                            text-xs text-gray-600 font-semibold cursor-pointer js-password-label"
                            for="login-toggle">show</label>
                    </div>
                    <!-- Password show and hide button -->

                    <input type="password" class="flex mt-2 py-2 mx-3 w-11/12 md:text-base text-sm form-control 
                        rounded-lg border-2 border-sky-800 js-password" id='password' name='password' required />
                </div>

                <div class="flex">
                    <button type="submit"
                        class="bg-sky-700 text-white border-white rounded-lg py-1.5 mt-4 px-3 mx-3">Login</button>
                    <a href="/forgot_password" class="text-blue-700 italic underline py-1.5 mt-4 px-3">Forgot
                        Password</a>
                </div>
            </form>
        </div>

        <div class="w-full md:w-5/6 lg:w-1/2 py-4 px-6 border-4 rounded-lg">
            <form action="/" method="POST">
                <div class="mb-3">
                    <label for="username" class="form-label mx-3">Username</label>
                    <input type="text" class="flex mt-2 py-2 mx-3 w-11/12 md:text-base text-sm 
                        form-control rounded-lg border-2 border-blue-800" id='username' name='username' required
                        hx-get="/check_user_register" hx-trigger="change, keyup
                        delay:200ms" hx-target="dup_user">
                </div>
                <label for="password" class="form-label mx-3">Password</label>

                <div class="relative w-full">

                    <!-- Adding password hide and show button -->
                    <div class="absolute inset-y-0 right-0 flex items-center px-4 xs:px-4 sm:px-4 xl:px-8">
                        <input class="hidden js-password-toggle_2" id="register-toggle" type="checkbox" />
                        <label class="bg-white rounded-lg px-2 mx-1 
                            text-xs font-semibold text-gray-600 cursor-pointer js-password-label_2"
                            for="register-toggle">show</label>
                    </div>
                    <!-- Adding password hide and show button -->

                    <input type="password" class="flex mt-2 py-2 mx-3 w-11/12 md:text-base text-sm form-control 
                        rounded-lg border-2 border-sky-800 js-password_2" id='password' name='password' required>
                </div>
                <button type="submit"
                    class="bg-red-400 text-white border-white rounded-lg py-1.5 mt-4 px-3 mx-3">Register</button>
            </form>
            <p class="dup_user"></p>
            {% if register_invalid %}

            <p class="text-red-500 bg-gray-200 mt-2 p-3 rounded-lg font-semibold">
                Account already registered. Please login or contact us if you
                have forgotten your password.
            </p>
            {% endif %}
        </div>
    </div>
</div>

<script>
    const passwordToggle = document.querySelector('.js-password-toggle')

    passwordToggle.addEventListener('change', function () {
        const password = document.querySelector('.js-password'),
            passwordLabel = document.querySelector('.js-password-label')

        if (password.type === 'password') {
            password.type = 'text'
            passwordLabel.innerHTML = 'hide'
        } else {
            password.type = 'password'
            passwordLabel.innerHTML = 'show'
        }

        password.focus()
    })

    const passwordToggle2 = document.querySelector('.js-password-toggle_2')

    passwordToggle2.addEventListener('change', function () {
        const password = document.querySelector('.js-password_2'),
            passwordLabel = document.querySelector('.js-password-label_2')

        if (password.type === 'password') {
            password.type = 'text'
            passwordLabel.innerHTML = 'hide'
        } else {
            password.type = 'password'
            passwordLabel.innerHTML = 'show'
        }

        password.focus()
    })
</script>

{% include 'footer.html' %}
